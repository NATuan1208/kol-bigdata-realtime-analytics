# ============================================================================
# KOL Analytics Platform - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual credentials
# cp .env.example .env
# ============================================================================

# ============================================================================
# MINIO (S3-Compatible Object Storage)
# ============================================================================
# MinIO access credentials for data lake storage
MINIO_ENDPOINT=localhost:9000          # MinIO endpoint (localhost for local dev)
MINIO_ACCESS_KEY=minioadmin            # Access key (default: minioadmin)
MINIO_SECRET_KEY=minioadmin123         # Secret key (change in production!)
MINIO_SECURE=false                     # Use HTTPS (false for local, true for prod)

# MinIO Bucket Names
MINIO_BUCKET_BRONZE=kol-bronze         # Raw data bucket
MINIO_BUCKET_SILVER=kol-silver         # Cleaned data bucket
MINIO_BUCKET_GOLD=kol-gold             # Gold/star schema bucket
MINIO_BUCKET_MLFLOW=kol-mlflow         # MLflow artifacts bucket

# ============================================================================
# REDIS (Real-time Cache & Streaming Data)
# ============================================================================
# Redis connection for hot path caching and trending scores
REDIS_HOST=localhost                   # Redis host (redis in Docker, localhost outside)
REDIS_PORT=16379                       # Redis port (16379 external, 6379 internal)
REDIS_DB=0                             # Redis database index (0-15)
REDIS_PASSWORD=                        # Redis password (leave empty if no auth)
REDIS_TTL=86400                        # Cache TTL in seconds (24 hours)

# ============================================================================
# MLFLOW (Model Registry & Experiment Tracking)
# ============================================================================
# MLflow server configuration for model versioning
MLFLOW_TRACKING_URI=http://localhost:5000  # MLflow server URL
MLFLOW_EXPERIMENT_NAME=kol-trust-score     # Default experiment name
MLFLOW_ARTIFACT_ROOT=s3://kol-mlflow/      # S3 bucket for artifacts (MinIO)

# ============================================================================
# APACHE SPARK (Distributed Processing)
# ============================================================================
# Spark cluster configuration
SPARK_MASTER_URL=spark://localhost:7077    # Spark master URL
SPARK_APP_NAME=KOL-Platform                # Default Spark app name
SPARK_EXECUTOR_MEMORY=2g                   # Executor memory per worker
SPARK_DRIVER_MEMORY=2g                     # Driver memory

# ============================================================================
# KAFKA / REDPANDA (Event Streaming)
# ============================================================================
# Kafka bootstrap servers for streaming data
KAFKA_BOOTSTRAP_SERVERS=localhost:19092    # Redpanda external port
KAFKA_AUTO_OFFSET_RESET=earliest           # earliest|latest (start position)
KAFKA_GROUP_ID=kol-consumers               # Consumer group ID

# Kafka Topics
KAFKA_TOPIC_VIDEOS=kol.videos.raw          # Video events topic
KAFKA_TOPIC_PROFILES=kol.profiles.raw      # KOL profile updates
KAFKA_TOPIC_PRODUCTS=kol.products.raw      # Product catalog
KAFKA_TOPIC_COMMENTS=kol.comments.raw      # User comments
KAFKA_TOPIC_DISCOVERY=kol.discovery.raw    # Discovery feed

# ============================================================================
# FASTAPI (REST API Server)
# ============================================================================
# API server configuration
API_HOST=0.0.0.0                           # Bind to all interfaces
API_PORT=8000                              # API server port
API_RELOAD=true                            # Auto-reload on code changes (dev only)
API_WORKERS=4                              # Number of Uvicorn workers

# API Rate Limiting
API_RATE_LIMIT=100                         # Requests per minute per IP

# ============================================================================
# MODEL PATHS (Local Fallback when MLflow unavailable)
# ============================================================================
# Local model artifact paths (relative to project root)
MODEL_ARTIFACTS_DIR=models/artifacts       # Base directory for model files

# Trust Score Models
TRUST_MODEL_XGB=models/artifacts/trust/xgb_trust_classifier_latest.joblib
TRUST_MODEL_LGBM=models/artifacts/trust/lgbm_trust_classifier_latest.joblib
TRUST_MODEL_IFOREST=models/artifacts/trust/iforest_trust_anomaly_latest.joblib
TRUST_MODEL_ENSEMBLE=models/artifacts/trust/ensemble_trust_stacking_latest.joblib

# Success Score Models
SUCCESS_MODEL_BINARY=models/artifacts/success/success_lgbm_model.pkl
SUCCESS_MODEL_TERNARY=models/artifacts/success/success_lgbm_model_ternary.pkl

# Trending Score (Real-time, no file)
# Calculated on-the-fly in Spark Streaming job

# ============================================================================
# DATA PATHS (For Batch Processing & Analysis)
# ============================================================================
# Training data location
TRAINING_DATA_DIR=data/training            # Training datasets
TEST_DATA_DIR=data/test                    # Test datasets
VALIDATION_DATA_DIR=data/validation        # Validation datasets

# Backup/Export paths
BACKUP_DIR=data/backup                     # Data backups
EXPORT_DIR=data/kafka_export               # Kafka export JSONs

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
# Logging configuration
LOG_LEVEL=INFO                             # DEBUG|INFO|WARNING|ERROR|CRITICAL
LOG_FORMAT=json                            # json|text
LOG_FILE=logs/kol-platform.log             # Log file path

# Prometheus metrics
PROMETHEUS_PORT=9090                       # Prometheus scrape port
METRICS_ENABLED=true                       # Enable metrics export

# ============================================================================
# SOCIAL MEDIA SCRAPING (Optional - for data collection)
# ============================================================================
# TikTok Scraper Settings
TIKTOK_HEADLESS=true                       # Run browser in headless mode
TIKTOK_TIMEOUT=30000                       # Page load timeout (ms)
TIKTOK_MAX_SCROLLS=10                      # Max scrolls per scrape session

# Twitter/X API (if using tweepy)
# TWITTER_API_KEY=your_api_key
# TWITTER_API_SECRET=your_api_secret
# TWITTER_ACCESS_TOKEN=your_access_token
# TWITTER_ACCESS_SECRET=your_access_secret

# ============================================================================
# ENVIRONMENT FLAGS
# ============================================================================
# Deployment environment
ENV=development                            # development|staging|production
DEBUG=true                                 # Enable debug mode (dev only)

# Feature flags
ENABLE_HOT_PATH=true                       # Enable real-time streaming
ENABLE_COLD_PATH=true                      # Enable batch processing
ENABLE_ML_SCORING=true                     # Enable ML model inference
